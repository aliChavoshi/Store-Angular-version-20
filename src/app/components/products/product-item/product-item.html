<!-- کارت محصول 1 -->
@if(product()){
@let p = product();
<div class="max-w-sm bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition group">

  <!-- بخش تصویر -->
  <div class="relative overflow-hidden">
    <div class="w-full h-64 bg-gray-200">
      <img [src]="p.thumbnail" alt="Product Image" class="w-full h-full object-cover">
    </div>

    <!-- برچسب تخفیف - discountPercentage -->
    @if(p.discountPercentage){
    <div class="absolute top-3 left-3 bg-blue-700 text-white px-2 py-1 rounded text-xs font-bold">
      {{p.discountPercentage | number:'1.0-0'}}% تخفیف
    </div>
    }

    <!-- برچسب موجودی - availabilityStatus -->
    @if(p.availabilityStatus){
    <div class="absolute top-3 right-3 bg-green-500 text-white px-2 py-1 rounded text-xs font-bold">
      موجود
    </div>
    }@else{
    <div class="absolute top-3 right-3 bg-red-500 text-white px-2 py-1 rounded text-xs font-bold">
      ناموجود
    </div>
    }

    <!-- امتیاز محصول - rating -->
    <div class="absolute bottom-3 right-3 bg-white bg-opacity-90 px-2 py-1 rounded-lg flex items-center gap-1">
      <svg class="w-4 h-4 text-yellow-400 fill-current" viewBox="0 0 20 20">
        <path
          d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
      </svg>
      <span class="text-sm font-semibold text-gray-800">{{p.rating}}</span>
    </div>
  </div>

  <!-- بخش اطلاعات -->
  <div class="p-4">

    <!-- دسته‌بندی و برند - category & brand -->
    <div class="flex items-center justify-between mb-2">
      <span class="text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded font-medium">{{p.category}}</span>
      <span class="text-xs text-gray-500">برند: {{p.brand}}</span>
    </div>

    <!-- SKU -->
    <div class="text-xs text-gray-400 mb-2">
      کد محصول: {{p.sku}}
    </div>

    <!-- عنوان محصول - title -->
    <h3 class="font-bold text-gray-800 mb-2 group-hover:text-blue-600 transition line-clamp-2">
      {{p.title}}
    </h3>

    <!-- توضیحات - description -->
    <!-- <p class="text-sm text-gray-600 mb-3 line-clamp-2">
      {{p.description}}
    </p> -->

    <!-- ویژگی‌های کلیدی - weight, dimensions, warrantyInformation, stock -->
    <div class="mb-3 space-y-1">
      <!-- وزن - weight -->
      <div class="flex items-center gap-2 text-xs text-gray-600">
        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
        </svg>
        <span>وزن: {{p.weight}} گرم</span>
      </div>

      <!-- ابعاد - dimensions -->
      <div class="flex items-center gap-2 text-xs text-gray-600">
        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" />
        </svg>
        <span>ابعاد: {{p.dimensions?.depth}} ✖️ {{p.dimensions?.height}} ✖️ {{p.dimensions?.width}} میلی‌متر</span>
      </div>

      <!-- گارانتی - warrantyInformation -->
      <div class="flex items-center gap-2 text-xs text-gray-600">
        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
        </svg>
        <span>گارانتی : {{p.warrantyInformation}} </span>
      </div>

      <!-- موجودی - stock -->
      <div class="flex items-center gap-2 text-xs text-gray-600">
        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4" />
        </svg>
        <span>موجودی: {{p.stock}} عدد</span>
      </div>

      <!-- حداقل تعداد سفارش - minimumOrderQuantity -->
      <div class="flex items-center gap-2 text-xs text-gray-600">
        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
        </svg>
        <span>حداقل سفارش: {{p.minimumOrderQuantity}} عدد</span>
      </div>
    </div>

    <!-- تگ‌ها - tags -->
    @if(p.tags){
    <div class="flex flex-wrap gap-1 mb-3">
      @for (item of p.tags; track $index) {
      <span class="text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded">{{item}}</span>
      }
    </div>
    }

    <!-- قیمت - price & discountPercentage -->
    <div class="flex items-center justify-between mb-3 pb-3 border-b border-gray-200">
      <div class="flex items-baseline gap-2">
        <span class="text-2xl font-bold text-blue-600">{{p.price}}</span>
        <span class="text-xs text-gray-600">تومان</span>
      </div>
      @if(p.discountPercentage){
      <div class="text-left">
        <span class="text-sm text-gray-400 line-through block">{{p.price + (p.price * p.discountPercentage)/100 |
          number:'1.0-2'}} $</span>
      </div>
      }
    </div>

    <!-- نظرات - reviews -->
    <div class="mb-3">
      <div class="flex items-center gap-2 text-xs text-gray-600 mb-2">
        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
        </svg>
        <span>{{p.reviews?.length}} نظر</span>
      </div>

      <!-- نمونه یک نظر از reviews -->
      <!-- <div class="bg-gray-50 p-2 rounded text-xs">
        <div class="flex items-center gap-1 mb-1">
          <span class="font-semibold">علی محمدی</span>
          <div class="flex">
            <svg class="w-3 h-3 text-yellow-400 fill-current" viewBox="0 0 20 20">
              <path
                d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
            </svg>
            <svg class="w-3 h-3 text-yellow-400 fill-current" viewBox="0 0 20 20">
              <path
                d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
            </svg>
            <svg class="w-3 h-3 text-yellow-400 fill-current" viewBox="0 0 20 20">
              <path
                d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
            </svg>
            <svg class="w-3 h-3 text-yellow-400 fill-current" viewBox="0 0 20 20">
              <path
                d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
            </svg>
            <svg class="w-3 h-3 text-yellow-400 fill-current" viewBox="0 0 20 20">
              <path
                d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
            </svg>
          </div>
        </div>
        <p class="text-gray-600">عالی بود، کاملا راضی هستم!</p>
      </div> -->
    </div>

    <!-- اطلاعات ارسال - shippingInformation -->
    <div class="mb-3 p-2 bg-green-50 rounded-lg">
      <div class="flex items-center gap-2 text-xs text-green-700">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <span>{{p.shippingInformation}}</span>
      </div>
    </div>

    <!-- دکمه‌های اکشن -->
    <div class="flex gap-2">
      <button
        class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium flex items-center justify-center gap-2">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
        </svg>
        افزودن به سبد
      </button>
      <button class="px-3 py-2 border border-gray-300 text-gray-600 rounded-lg hover:bg-gray-50 transition">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
        </svg>
      </button>
    </div>

    <!-- سیاست بازگشت - returnPolicy -->
    <!-- <div class="mt-3 text-xs text-gray-500 text-center">
      <span>{{p.returnPolicy}}</span>
    </div> -->
  </div>
</div>

<!-- راهنمای استفاده از فیلدها -->
<!-- <div class="mt-8 max-w-4xl bg-blue-50 p-6 rounded-lg">
        <h2 class="text-lg font-bold text-gray-800 mb-4">راهنمای فیلدهای Product Interface:</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
            <div><strong>id:</strong> شناسه منحصر به فرد محصول</div>
            <div><strong>title:</strong> عنوان محصول (h3)</div>
            <div><strong>description:</strong> توضیحات کامل محصول (paragraph)</div>
            <div><strong>category:</strong> دسته‌بندی (badge آبی)</div>
            <div><strong>price:</strong> قیمت اصلی محصول</div>
            <div><strong>discountPercentage:</strong> درصد تخفیف (badge قرمز)</div>
            <div><strong>rating:</strong> امتیاز محصول (ستاره زرد)</div>
            <div><strong>stock:</strong> موجودی انبار</div>
            <div><strong>tags:</strong> برچسب‌های محصول (badge های خاکستری)</div>
            <div><strong>brand:</strong> برند محصول</div>
            <div><strong>sku:</strong> کد محصول</div>
            <div><strong>weight:</strong> وزن محصول</div>
            <div><strong>dimensions:</strong> ابعاد محصول (width, height, depth)</div>
            <div><strong>warrantyInformation:</strong> اطلاعات گارانتی</div>
            <div><strong>shippingInformation:</strong> اطلاعات ارسال (box سبز)</div>
            <div><strong>availabilityStatus:</strong> وضعیت موجودی (badge سبز)</div>
            <div><strong>reviews:</strong> نظرات کاربران (لیست نظرات)</div>
            <div><strong>returnPolicy:</strong> سیاست بازگشت کالا</div>
            <div><strong>minimumOrderQuantity:</strong> حداقل تعداد سفارش</div>
            <div><strong>thumbnail:</strong> تصویر اصلی (img src)</div>
            <div><strong>images:</strong> آرایه تصاویر محصول</div>
        </div>
    </div> -->
}
